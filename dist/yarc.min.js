/**!
 * yarc-js v0.0.1-alpha.8
 * License: MIT
 * https://github.com/literallylara/yarc-js#readme
 */var YARC=function(){'use strict';const a=(b,...c)=>{let d=null,e=null,f=null;if(0==c.length&&(d=[],e={}),c[0]instanceof Array?(d=c[0],e={}):c[0]instanceof Object?(d=c[1]||[],e=c[0]):"string"==typeof c[0]&&(f=c[0]),"function"==typeof b){const a=new b(e,d,f),c=a.render();return c.component=a,a.vdom=c,c}if("object"==typeof b&&b.render){const a=b,c=b.render(e,d,f);return c.component=a,a.vdom=c,c}const g={tag:b,attributes:e,children:d,text:f,dom:null};return e&&(e.mount&&(g.onMount=e.mount,delete e.mount),e.unmount&&(g.onUnmount=e.unmount,delete e.unmount)),g.children&&(g.children=g.children.slice(0),g.children.forEach((b,c)=>{"string"==typeof b?g.children[c]=a("#",b):("function"==typeof b||"object"==typeof b&&b.render)&&(g.children[c]=a(b)),g.children[c].parent=g})),g},c=a=>{let b=null;if("#"==a.tag)return document.createTextNode(a.text);if(b="[]"==a.tag?document.createDocumentFragment():document.createElementNS(a.namespaceURI||"http://www.w3.org/1999/xhtml",a.tag),a.attributes)for(let c in a.attributes){let d=a.attributes[c];"function"==typeof d?b.addEventListener(c,d):void 0!==d&&b.setAttributeNS(d.namespaceURI,c,d)}return a.children&&a.children.forEach(a=>d(b,a)),a.text&&(b.textContent=a.text),b},d=(a,b,d=!1)=>{if(d&&a.childNodes)for(;a.childNodes.length;){let b=a.childNodes[a.childNodes.length-1];b._vdom?e(b._vdom):b.remove()}b.dom=c(b),b.dom._vdom=b,a.appendChild(b.dom),b.onMount&&b.onMount(b.dom),b.component&&b.component.onMount&&b.component.onMount(b.dom)},e=a=>{a.children.forEach(a=>e(a)),a.dom&&a.dom.remove&&a.dom.remove(),a.onUnmount&&a.onUnmount()},f=(g,a)=>{g.dom||c(g);const b=g.dom;if(g.tag!==a.tag){const c=b.parentNode;return e(g),d(c,a),a}const h=g.attributes||[],i=a.attributes||[];Object.keys(h).concat(Object.keys(i)).forEach(a=>{const c=h[a],d=i[a];d===void 0?"function"==typeof c?b.removeEventListener(a,c):(b[a]=d,b.removeAttribute(a)):d!==c&&("function"==typeof d?(b.removeEventListener(a,c),b.addEventListener(a,d)):(b[a]=d,b.setAttributeNS(null,a,d)))});const j=g.children||[],k=a.children||[],l=Math.max(j.length,k.length);for(let c=0;c<l;c++){const a=j[c],g=k[c];a&&g?f(a,g):g?d(b,g):e(a)}g.text!=a.text&&(b.textContent=a.text),a.dom=b};class g{constructor(){this._events={}}fire(a,b){const c=this._events[a]||[];c.fired=!0;for(let d=0;d<c.length;d++)c[d].call(this,b);for(let c=this.vdom;c&&c.parent;)c=c.parent,c&&c.component&&this.fire.call(c.component,a,{type:a,target:this,data:b})}on(a,b){let c=this._events[a];c||(c=this._events[a]=[]),c.push(b)}once(a,b){const c=this._events[a];c&&c.fired?b():this.on(a,b)}off(a,b){let c=this._events[a];if(!b)return void(c.length=0);for(let d=0;d<c.length;d++)if(c[d]===b)return void b.splice(d,1)}}return{createElement:a,Component:class a extends g{constructor(a={},b=[]){super(),this.props=Object.freeze(Object.assign({},a)),this.state={},this.children=b}setState(){let a;if("string"==typeof arguments[0]){const b=arguments[0],c=arguments[1];this.state[b]=c,a=arguments[2]}else{const b=arguments[0];for(let a in b)this.state[a]=b[a];a=arguments[1]}(a||a===void 0)&&this.update()}saveState(a){window.localStorage.setItem(a,JSON.stringify({timestamp:Date.now(),data:this.state}))}getSavedState(a){const b=window.localStorage.getItem(a);if(b)try{return JSON.parse(b)}catch(a){}}loadState(a){try{const b=window.localStorage.getItem(a);if(!b)return!1;const c=JSON.parse(b);return!!c.data&&(Object.assign(this.state,c.data),!0)}catch(a){return!1}}mount(a){if(this.vdom)throw new Error("Component already mounted.");this.vdom=this.render(),this.vdom.parent=a,this.vdom.component=this,d(a,this.vdom),this.fire("mount"),this.props.onMount&&this.props.onMount()}unmount(){if(!this.vdom)throw new Error("Component not mounted.");e(this.vdom),delete this.vdom,this.fire("unmount"),this.props.onUnmount&&this.props.onUnmount()}update(){if(!this.vdom)return;const a=this.vdom.parent,b=this.render();f(this.vdom,b),this.vdom=b,this.vdom.parent=a,this.vdom.component=this,this.fire("update")}}}}();
